<!DOCTYPE html>
<html>
<head>
  <script src="checkerboard.js"></script>
  <script src="q.min.js"></script>
  <style type="text/css">
  #sharedText {width: 100%; height: 100%; font-size: 36pt; color: green}
  </style>
  <script>
    var stm = new SharedTransactionalMemory(new WebSocket('ws://localhost:904/'));

    stm.onready = function() {

      stm.onchange = function(state) {
        document.getElementById('sharedText').value = state.sharedText || "";
      };

      document.getElementById('sharedText').oninput = function(e) {
        stm.try(function(state) {
          state('sharedText', e.target.value);
        })
      }

      stm.sync(1000);
    }

  </script>
</head>
<body>
  <textarea id="sharedText"></textarea>
</html>
